/*
 * This is the top-level build file where you can add configuration options common to all sub-projects/modules.
 * The following content represents a typical React Native project's android/build.gradle file.
 * The fix addresses the missing 'com.facebook.react:react-native' dependency by ensuring all required Maven repositories are correctly configured.
 */

buildscript {
    ext {
        // Define common versions here. Adjust these values if your project requires different versions.
        buildToolsVersion = findProperty('android.buildToolsVersion') ?: '34.0.0'
        minSdkVersion = findProperty('android.minSdkVersion') ?: 21
        compileSdkVersion = findProperty('android.compileSdkVersion') ?: 34
        targetSdkVersion = findProperty('android.targetSdkVersion') ?: 34
        kotlinVersion = findProperty('android.kotlinVersion') ?: '1.8.0' // Ensure a compatible Kotlin version, e.g., '1.9.0' for newer RN
        gradlePluginVersion = findProperty('android.gradlePluginVersion') ?: '8.2.1' // Ensure a compatible Android Gradle Plugin version
    }
    repositories {
        google()
        mavenCentral()
    }
    dependencies {
        classpath("com.android.tools.build:gradle:$gradlePluginVersion")
        classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion") // Required for Kotlin-based projects/modules
        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

allprojects {
    repositories {
        // START FIX: Ensure these repositories are declared for all sub-projects.
        // The `com.facebook.react:react-native` artifact is published to Maven Central
        // and/or made available locally via node_modules.
        google()          // Google's Maven repository for AndroidX libraries and other Google artifacts
        mavenCentral()    // Maven Central repository, where many open-source libraries are published, including React Native artifacts
        maven { url "$rootDir/../node_modules/react-native/android" } // Essential for local React Native Android artifacts
        maven { url "https://www.jitpack.io" } // Often required by various community React Native modules
        // END FIX
    }
}

// Task to clean the build directory
tasks.register('clean', Delete) {
    delete rootProject.buildDir
}
